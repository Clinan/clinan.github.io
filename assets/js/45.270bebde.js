(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{488:function(o,t,e){"use strict";e.r(t);var r=e(10),a=Object(r.a)({},(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[e("h1",{attrs:{id:"mysql事务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql事务"}},[o._v("#")]),o._v(" MySQL事务")]),o._v(" "),e("p",[o._v("事务的隔离性由锁来实现。原子性、一致性、持久性通过数据库的"),e("code",[o._v("redo log")]),o._v("和"),e("code",[o._v("undo log")]),o._v("来完成。")]),o._v(" "),e("ul",[e("li",[o._v("redo log。称为重做日志，用来保证事务的原子性和持久性。用于写入")]),o._v(" "),e("li",[o._v("undo log。用来保证事务的一致性。用于回滚")])]),o._v(" "),e("p",[o._v("有的DBA或许会任务undo是redo的逆过程，其实不是。redo和undo的作用都可以视为一种恢复操作，redo恢复提交事务修改的页操作，而undo回滚行记录到某个特定版本。因此两者记录的内容不同，redo通常是物理日志，记录的是页的物理修改操作。undo是逻辑日志，根据每行记录进行记录。")]),o._v(" "),e("h3",{attrs:{id:"如果事务一直不提交-会怎么样"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如果事务一直不提交-会怎么样"}},[o._v("#")]),o._v(" 如果事务一直不提交，会怎么样")]),o._v(" "),e("ol",[e("li",[e("code",[o._v("SHOW VARIABLES LIKE 'innodb_rollback_on_timeout%';")]),o._v("查看事务超时回滚开关是否开启。")]),o._v(" "),e("li",[o._v("如果连接断开，事务会不会回滚。会，只要连接断开了。事务就会马上回滚，并释放锁。")])]),o._v(" "),e("h2",{attrs:{id:"redo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redo"}},[o._v("#")]),o._v(" redo")])])}),[],!1,null,null,null);t.default=a.exports}}]);